---
description: TypeScript2.9ã®ãƒªãƒªãƒ¼ã‚¹å†…å®¹ã¾ã¨ã‚
---

# [TypeScript] 2.9

{{ page.meta.description }}


## [Support number and symbol named properties with keyof and mapped types]

[Support number and symbol named properties with keyof and mapped types]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-9.html#support-number-and-symbol-named-properties-with-keyof-and-mapped-types

{{label('had_better')}} {{label('normal')}}

index typesã‚„[mapped types]ã§`number`ã‚„`symbol`ã®named propertiesã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | named propertiesã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹å‹ |
| ---------- | -------------------------------- |
| 2.8ä»¥å‰    | string                           |
| 2.9        | string, **number**, **symbol**   |

=== "index typesãŒstring"
    ```typescript
    const One = Symbol();
    interface A {
      one: string;
      1: string;
      [One]: string;
      [x: string]: string;
    }
    type KeyOfA = keyof A;
    // v2.8: string
    //   * 1ã¯stringã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ãŸã‚ "one" | "1"
    //   * symbolã¯æœªå¯¾å¿œãªã®ã§ç„¡è¦–
    //   * stringã®index typesã« "one" | "1" ã‚‚å«ã¾ã‚Œã‚‹ã®ã§ã¾ã¨ã‚ã¦string
    // v2.9: string | number | unique symbol
    //   * keyofãŒnumberã¨symbolã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ã«ãªã£ãŸ
    //   * "one"ã¯stringã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã¨ã—ã¦çµ±åˆã•ã‚ŒãŸ
    ```

=== "index typesãŒnumber"
    ```typescript
    const Two = Symbol();
    interface B {
      two: string;
      2: string;
      [Two]: string;
      [x: number]: string;
    }
    type KeyOfB = keyof B;
    // v2.8: "two" | "2"
    //   * 2ã¯stringã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ãŸã‚ "two" | "2"
    //   * symbolã¯æœªå¯¾å¿œãªã®ã§ç„¡è¦–
    //   * numberã®index typesã¯ã‚µãƒãƒ¼ãƒˆå¤–ã®ãŸã‚ç„¡è¦–
    // v2.9: number | unique symbol | "two"
    //   * keyofãŒnumberã¨symbolã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ã«ãªã£ãŸ
    //   * 2ã¯numberã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã¨ã—ã¦çµ±åˆã•ã‚ŒãŸãŒã€"two"ã¨[Two]ã¯numberã§ãªã„ãŸã‚æ®‹ã‚‹
    ```

=== "index typesãªã—"
    ```typescript
    const Three = Symbol();
    interface C {
      three: string;
      3: string;
      [Three]: string;
    }
    type KeyOfC = keyof C;
    // v2.8: "three" | "3"
    //   * 3ã¯stringã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ãŸã‚ "three" | "3"
    //   * symbolã¯æœªå¯¾å¿œãªã®ã§ç„¡è¦–
    // v2.9: unique symbol | "three" | 3
    //   * index typesã¯ç„¡ã„ã®ã§ã€named propertiesãŒãã®ã¾ã¾union typesã¨ã—ã¦é©å¿œã•ã‚Œã‚‹
    ```

index typesãŒstringä»¥å¤–ã®å ´åˆã§[mapped types]ã‚’ç”¨ã„ã¦ã‚‚ã€index typesã®å‹ãŒå°Šé‡ã•ã‚Œã‚‹ã€‚

```typescript
interface D {
  hoge: string;
  [x: number]: string;
}
type ReadonlyType<T> = { readonly [P in keyof D]: D[P] };
declare const tmp: ReadonlyType<D>;
const r = tmp[10];
// v2.8: TS7017: Element implicitly has an 'any' type because type 'ReadonlyType ' has no index signature
//   * numberã®index typesã¯æœªå¯¾å¿œã®ãŸã‚èªè­˜ã•ã‚Œãªã„ã‹ã‚‰anyã«ãªã‚‹
// v2.9: rã¯string
//   * numberã®index typesãŒèªè­˜ã•ã‚Œã‚‹ãŸã‚stringã¨ã¿ãªã•ã‚Œã‚‹
```

!!! warning "JetBrainsã®IDEã§å‹æ¨è«–ãŒä¸Šæ‰‹ãåæ˜ ã•ã‚Œãªã„"
    ç¨€ã«ã€IDEç‰¹æœ‰ã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦åˆ¤å®šã•ã‚ŒãŸå‹ã¯æ­£ã—ãæ¨è«–ã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚  
    ãã®å ´åˆã¯tscã®å®Ÿè¡Œçµæœã‚’ç¢ºèªã—ã¦ã€ãã¡ã‚‰ã‚’ä¿¡ã˜ã¾ã—ã‚‡ã†ğŸ˜œ


## [Generic type arguments in JSX elements]

[Generic type arguments in JSX elements]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-9.html#generic-type-arguments-in-jsx-elements

{{label('had_better')}} {{label('easy')}}

JSXè¦ç´ ã«ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®å‹å¼•æ•°ã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚  
`<YourComponent<Props> />`ã®ã‚ˆã†ãªæ„Ÿã˜ã€‚


## [Generic type arguments in generic tagged templates]

[Generic type arguments in generic tagged templates]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-9.html#generic-type-arguments-in-generic-tagged-templates

{{label('had_better')}} {{label('easy')}}

ã‚¿ã‚°ä»˜ã‘ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

```typescript
export function twice<T>(strs: TemplateStringsArray, ...values: T[]): string {
  return strs.reduce(
    (accum, str, i) => `${accum}${values[i - 1]}${values[i - 1]}${str}`
  );
}

const res1 = twice<string>`I play ${"tennis"} every ${"day"}`;
const res2 = twice<number>`I play ${1} every ${200}`;

console.log(res1);
// -> I play tennistennis every dayday
console.log(res2);
// -> I play 11 every 200200
```


## [import types]

[import types]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-9.html#import-types

{{label('unknown')}} {{label('easy')}}

å‹æ³¨é‡ˆã§importã‚¿ã‚¤ãƒ—ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

`sub.ts`
```typescript
export declare class Human {
  id: number;
  name: string;
}
```

`main.ts`
```typescript
function getName(human: import("./sub").Human): string {
  return human.name;
}
```

!!! question "ã©ã†ã„ã†ã¨ãä½¿ã†ã®ã‹ãŒåˆ†ã‹ã‚‰ãªã„.."
    éãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚‚å®£è¨€ã®ã¿ã®ã‚¯ãƒ©ã‚¹ã‚’importã§ããŸã®ã§..


## [Relaxing declaration emit visiblity rules]

[Relaxing declaration emit visiblity rules]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-9.html#relaxing-declaration-emit-visiblity-rules

{{label('had_better')}} {{label('easy')}}

TypeScript2.8ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã§`.d.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚  
â€» `--declaration`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã—ã¦å®Ÿè¡Œ

`sub.ts`
```typescript
export interface Result<T> {
  data: T;
}

export const createResult = (): Result<number> => ({ data: 123 });
```

`index.ts`
```typescript
import { createResult } from "./sub";

export const r = createResult();
```

`index.ts`ã§`Result`ã‚’æ˜ç¤ºçš„ã«importã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã¯æ¶ˆãˆã‚‹ã€‚

TypeScript2.9ã§ã¯ä¸Šè¨˜ã®importãªã—ã«`.d.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚  
`import types`ã®å¯¾å¿œã«ã‚ˆã‚‹ã‚‚ã®ã§ã€`.d.ts`ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ã‚‚ä½¿ã‚ã‚Œã¦ã„ã‚‹ã€‚

```typescript
import { createResult, Result } from "./sub";

export const r = createResult();
```

!!! question "ãªãœ2.8ã¾ã§ã§ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã‹åŸå› ãŒåˆ†ã‹ã‚‰ãªã„ã€‚ã€‚"
    `import types`ã«ã‚ˆã£ã¦2.9ã‹ã‚‰ç›´æ„Ÿçš„ã«å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã¯å¬‰ã—ã„ãŒã€‚ã€‚


## [Support for import.meta]

[Support for import.meta]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-9.html#support-for-importmeta

{{label('unknown')}} {{label('easy')}}

[TC39ã§proposalã•ã‚ŒãŸæ–°ã—ã„metaãƒ—ãƒ­ãƒ‘ãƒ†ã‚£](https://github.com/tc39/proposal-import-meta)ã«å¯¾å¿œã—ãŸã€‚  
`--module`ãŒ`esnext`ã§ãªã„ã¨ä½¿ãˆãªã„ã®ã§æ³¨æ„ã€‚


## [New --resolveJsonModule]

[New --resolveJsonModule]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-9.html#new---resolvejsonmodule

{{label('should')}} {{label('easy')}}

`--resolveJsonModule`ã‚’ä»˜ã‘ã‚‹ã¨jsonãƒ•ã‚¡ã‚¤ãƒ«ã‚’importã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚  
é™çš„jsonã§ã‚ã‚Œã°è£œå®Œã‚„å‹æ¨è«–ã‚‚åŠ¹ãã€‚

å‰æã¨ã—ã¦ã€`moduleResolution`ã«`node`ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

=== "package.json"
    ```json
    {
      "name": "sample",
      "version": "1.0.0",
      // ä¸­ç•¥
      "devDependencies": {
        "prettier": "^2.0.5",
        "typescript": "^3.9.5"
      }
    }
    ```

=== "tsconfig.json"
    ```json
    {
      "compilerOptions": {
        "target": "es5",
        "module": "commonjs",
        "strict": true,
        "moduleResolution": "node",
        "resolveJsonModule": true,
        "esModuleInterop": true
      }
    }
    ```

=== "index.ts"
    ```typescript
    import packageJson from "./package.json";

    // è£œå®Œã‚‚åŠ¹ã
    console.log(packageJson.devDependencies)
    // -> { prettier: '^2.0.5', typescript: '^3.9.5' }
    ```



[mapped types]: ../2.1/#mapped-types
