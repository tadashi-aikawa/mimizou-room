---
description: TypeScript3.0ã®ãƒªãƒªãƒ¼ã‚¹å†…å®¹ã¾ã¨ã‚
---

# [TypeScript] 3.0

{{ page.meta.description }}

## [Project References]

[Project References]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#project-references

{{label('had_better')}} {{label('normal')}}

ã‚ã‚‹TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰åˆ¥ã®TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚  
å·¨å¤§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆ†å‰²ã™ã‚‹ã“ã¨ãŒã§ãã€ä»¥ä¸‹ã®æ§˜ãªãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹ã€‚

* çµåˆåº¦ãŒä½ãéƒ¨å“åŒ–ã•ã‚ŒãŸè¨­è¨ˆãŒã§ãã‚‹
* ä¸€æ–¹å‘ã®å¯è¦–æ€§ã‚’å®šç¾©ã§ãã‚‹ (å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãˆãªã„ã‚ˆã†ã«ã™ã‚‹ etc)
* å¿…è¦ãªç®‡æ‰€ã ã‘ãƒ“ãƒ«ãƒ‰(å‹ãƒã‚§ãƒƒã‚¯/ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«)ã™ã‚‹ãŸã‚ãƒ“ãƒ«ãƒ‰é€Ÿåº¦ãŒä¸ŠãŒã‚‹

è©³ç´°ã¯ä»¥ä¸‹ã‚’å‚ç…§ã€‚

{{link("https://www.typescriptlang.org/docs/handbook/project-references.html")}}

### ãƒ“ãƒ«ãƒ‰ãƒ¢ãƒ¼ãƒ‰

TypeScript3.0ã§ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå˜ä½ã§ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ãƒ“ãƒ«ãƒ‰ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚  
`tsc --build`ã¾ãŸã¯`tsc -b`ã¨ãƒ•ãƒ©ã‚°ã‚’æŒ‡å®šã™ã‚‹ã ã‘ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚‹å ´åˆã‚’è€ƒãˆã‚‹ã€‚

```
ï„•  src
â”œâ”€â”€ î˜¨  index.ts
â”œâ”€â”€ î˜‹  tsconfig.json
â””â”€â”€ î˜¨  util.ts
```

å¾“æ¥ã¯`tsc`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½•åº¦å®Ÿè¡Œã—ã¦ã‚‚ã€éƒ½åº¦ãƒ•ãƒ«ãƒ“ãƒ«ãƒ‰ã‚’ã—ã¦ã„ãŸã€‚  
ãƒ“ãƒ«ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦å¿…è¦ãªæ™‚ã®ã¿ãƒ“ãƒ«ãƒ‰ã•ã›ã‚‹ã€‚

#### 1åº¦ç›®ã®å®Ÿè¡Œ

1åº¦ç›®ã®å®Ÿè¡Œã§ã¯å…¨ã¦ã®tsãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ“ãƒ«ãƒ‰ã•ã‚Œã‚‹ã€‚

```
$ npx tsc -b -v
[20:56:16] Projects in this build:
    * tsconfig.json

[20:56:16] Project 'tsconfig.json' is out of date because output file 'index.js' does not exist

[20:56:16] Building project 'C:/Users/syoum/work/sandbox/typescript/project-reference/src/tsconfig.json'...
```

`index.js`ãŒå­˜åœ¨ã—ãªã„æ™‚ç‚¹ã§ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ãƒªãƒ“ãƒ«ãƒ‰ãŒå¿…è¦ã¨åˆ¤æ–­ã•ã‚ŒãŸã‹ã‚‰ã ã€‚  
ã‚‚ã¡ã‚ã‚“`util.js`ãŒç„¡ã„å ´åˆã‚‚åŒã˜ã€‚

#### 2åº¦ç›®ã®å®Ÿè¡Œ

2åº¦ç›®ã®å®Ÿè¡Œã§ã¯å®Ÿéš›ã®ãƒ“ãƒ«ãƒ‰å‡¦ç†ã¯ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã‚‹ã€‚

```
$ npx tsc -b -v
[20:58:44] Projects in this build:
    * tsconfig.json

[20:58:44] Project 'tsconfig.json' is up to date because newest input 'index.ts' is older than oldest output 'util.js'
```

ä»¥ä¸‹ã®é–¢ä¿‚ã«ã‚ã‚‹ãŸã‚ã€ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦ã¨åˆ¤æ–­ã™ã‚‹ã‹ã‚‰ã ã€‚

* `æ–°ã—ã„`
* â†‘
* æœ€ã‚‚å¤ã„æˆæœç‰©ã®`util.js`
* æœ€ã‚‚å¤ã„å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚‹`index.ts`
* â†“
* `å¤ã„`

#### ãƒ“ãƒ«ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã®å•é¡Œç‚¹

`tsc`ãƒ“ãƒ«ãƒ‰ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒåˆ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚½ãƒ¼ã‚¹ã‚’å‚ç…§ã™ã‚‹å ´åˆã€ãƒªãƒ“ãƒ«ãƒ‰åˆ¤å®šãŒæ­£ã—ãè¡Œã‚ã‚Œãªã„ã€‚  
ãŸã¨ãˆã°ä»¥ä¸‹ã®æ§‹æˆã‚’è€ƒãˆã‚‹ã€‚

```
ï„•  src
â”œâ”€â”€ î˜¨  index.ts
â”œâ”€â”€ î˜‹  tsconfig.json
â””â”€â”€ î˜¨  util.ts
ï„•  test  <============== testé…ä¸‹ã§ tsc -b ã™ã‚‹
â”œâ”€â”€ î˜¨  index.ts  <====== ../src/util.tsã‚’å‚ç…§ã—ã¦ã„ã‚‹
â””â”€â”€ î˜‹  tsconfig.json
```

`tsc -b`ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã€`test/index.js`ãŠã‚ˆã³å‚ç…§å…ˆã®`src/util.js`ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚

```
ï„•  src
â”œâ”€â”€ î˜¨  index.ts
â”œâ”€â”€ î˜‹  tsconfig.json
â”œâ”€â”€ î  util.js  <===== ç”Ÿæˆ
â””â”€â”€ î˜¨  util.ts
ï„•  test
â”œâ”€â”€ î  index.js  <==== ç”Ÿæˆ
â”œâ”€â”€ î˜¨  index.ts  <==== ../src/util.tsã‚’å‚ç…§ã—ã¦ã„ã‚‹
â””â”€â”€ î˜‹  tsconfig.json
```

ã“ã®çŠ¶æ…‹ã§`util.ts`ã«å¤‰æ›´ã‚’åŠ ãˆã¦ã‚‚ã†ä¸€åº¦`tsc -b`ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã€‚  
æœŸå¾…ã™ã‚‹ã®ã¯`src/util.js`ã®å†ç”Ÿæˆã ãŒã€`test`é…ä¸‹ã«ã¯å¤‰æ›´ãŒãªã„ãŸã‚ãƒ“ãƒ«ãƒ‰ã¯ä¸è¦ã¨åˆ¤æ–­ã•ã‚Œã‚‹ã€‚

```
ï„•  src
â”œâ”€â”€ î˜¨  index.ts
â”œâ”€â”€ î˜‹  tsconfig.json
â”œâ”€â”€ î  util.js  <===== â¹ ãƒªãƒ“ãƒ«ãƒ‰ã•ã‚Œãªã„(ã“ã‚Œã¯ã¾ãšã„)
â””â”€â”€ î˜¨  util.ts  <===== â¸ å¤‰æ›´ã‚’åŠ ãˆãŸã®ã«ã€‚ã€‚
ï„•  test
â”œâ”€â”€ î  index.js  <==== â· ãƒ“ãƒ«ãƒ‰ã•ã‚Œãªã„(ã“ã‚Œã¯OK)
â”œâ”€â”€ î˜¨  index.ts  <==== â¶ å¤‰æ›´ã•ã‚Œã¦ã„ãªã„ãŸã‚..
â””â”€â”€ î˜‹  tsconfig.json
```

ã“ã‚Œã‚’è§£æ±ºã™ã‚‹ã«ã¯å¿…ãšä»¥ä¸‹ã®é †ã§å‡¦ç†ã‚’ã—ãªã‘ã‚Œã°ã„ã‘ãªã„ã€‚

1. `src`é…ä¸‹ã§`tsc -b`
2. `test`é…ä¸‹ã§`tsc -b`

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚ç…§ã‚’ä½¿ã†ã¨ã€2ã®æ‰‹é †ã®ã¿ã§OKã«ãªã‚‹ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚ç…§

å‚ç…§ã•ã‚Œã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€å‚ç…§ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãã‚Œãã‚Œè¨­å®šãŒå¿…è¦ã€‚

#### å‚ç…§ã•ã‚Œã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š

ã“ã“ã§ã¯`src/tsconfig.json`ã®ã“ã¨ã€‚  
`comoposite: true`ã‚’è¿½åŠ ã™ã‚‹ã€‚

```diff
  {
    "compilerOptions": {
      "target": "es5",
      "module": "commonjs",
      "strict": true,
-     "esModuleInterop": true
+     "esModuleInterop": true,
+     "composite": true
    }
  }
```

ã“ã‚Œã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªåŠ¹æœã‚‚ã‚ã‚‹ã€‚

* è¨­å®šãªã—ã«åˆ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å‚ç…§ã‚’ç¦æ­¢ã™ã‚‹ (`test`é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’importã§ããªã„)
* ãƒ“ãƒ«ãƒ‰æ™‚ã«`.d.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡ºåŠ›ã™ã‚‹

#### å‚ç…§ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š

ã“ã“ã§ã¯`test/tsconfig.json`ã®ã“ã¨ã€‚  
`references: []`ã‚’è¿½åŠ ã™ã‚‹ã€‚

```diff
  {
    "compilerOptions": {
      "target": "es5",
      "module": "commonjs",
      "strict": true,
      "esModuleInterop": true
+   },
+   "references": [
+     { "path": "../src" }
+   ]
  }
```

ã“ã®è¨­å®šã§ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«`../src`ã®ãƒªãƒ“ãƒ«ãƒ‰å¿…è¦æ€§ã‚’ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

#### tsc -b ã®å‹•ä½œç¢ºèª

ã“ã®çŠ¶æ…‹ã§`test`ã«ã¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã€‚

```
ï„•  src
â”œâ”€â”€ î˜¨  index.ts
â”œâ”€â”€ î˜‹  tsconfig.json
â””â”€â”€ î˜¨  util.ts
ï„•  test  <========= tsc -b
â”œâ”€â”€ î˜¨  index.ts
â””â”€â”€ î˜‹  tsconfig.json
```

ãã‚Œãã‚Œ`index.js`ãŒãªã„ã®ã§ãƒ•ãƒ«ãƒ“ãƒ«ãƒ‰ã•ã‚Œã‚‹ã€‚

```
$ npx tsc -b -v
[21:27:31] Projects in this build:
    * ../src/tsconfig.json
    * tsconfig.json

[21:27:31] Project '../src/tsconfig.json' is out of date because output file '../src/index.js' does not exist

[21:27:31] Building project 'C:/Users/syoum/work/sandbox/typescript/project-reference/src/tsconfig.json'...

[21:27:33] Project 'tsconfig.json' is out of date because output file 'index.js' does not exist

[21:27:33] Building project 'C:/Users/syoum/work/sandbox/typescript/project-reference/test/tsconfig.json'...
```

ãã®ã¾ã¾ã‚‚ã†ä¸€åº¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã‚‹ã€‚ã“ã‚Œã¯è‡ªæ˜ã ã€‚  
`js`ãƒ•ã‚¡ã‚¤ãƒ«ã®ä»–ã«`d.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚„`tsconfig.tsbuildinfo`ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¢—ãˆã¦ã„ã‚‹ã€‚

```
ï„•  src
â”œâ”€â”€ î˜¨  index.d.ts  <============== d.tsãƒ•ã‚¡ã‚¤ãƒ«ãŒã§ãã¦ã„ã‚‹
â”œâ”€â”€ î  index.js
â”œâ”€â”€ î˜¨  index.ts
â”œâ”€â”€ î˜‹  tsconfig.json
â”œâ”€â”€ ï…›  tsconfig.tsbuildinfo  <==== ãƒ“ãƒ«ãƒ‰æƒ…å ± (å·®åˆ†åˆ¤å®šã«ä½¿ã†?)
â”œâ”€â”€ î˜¨  util.d.ts  <=============== d.tsãƒ•ã‚¡ã‚¤ãƒ«ãŒã§ãã¦ã„ã‚‹
â”œâ”€â”€ î  util.js
â””â”€â”€ î˜¨  util.ts
ï„•  test
â”œâ”€â”€ î  index.js
â”œâ”€â”€ î˜¨  index.ts
â””â”€â”€ î˜‹  tsconfig.json
```

å…ˆã»ã©ã®ã‚ˆã†ã«`src/util.ts`ã‚’å¤‰æ›´ã—ã¦ã‚‚ã†ä¸€åº¦ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹ã€‚

```
$ npx tsc -b -v
[21:33:38] Projects in this build:
    * ../src/tsconfig.json
    * tsconfig.json

[21:33:38] Project '../src/tsconfig.json' is out of date because oldest output '../src/index.js' is older than newest input '../src/util.ts'

[21:33:38] Building project 'C:/Users/syoum/work/sandbox/typescript/project-reference/src/tsconfig.json'...

[21:33:38] Updating unchanged output timestamps of project 'C:/Users/syoum/work/sandbox/typescript/project-reference/src/tsconfig.json'...

[21:33:38] Project 'tsconfig.json' is up to date with .d.ts files from its dependencies

[21:33:38] Updating output timestamps of project 'C:/Users/syoum/work/sandbox/typescript/project-reference/test/tsconfig.json'...
```

`Project '../src/tsconfig.json' is out of date because...`ã¨ã‚ã‚‹ã‚ˆã†..  
å‚ç…§å…ˆã®`src`ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå¤‰æ›´ã•ã‚ŒãŸã“ã¨ã‚’æ¤œçŸ¥ã—ãƒªãƒ“ãƒ«ãƒ‰ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸğŸ˜„

TypeScript3.0æ™‚ç‚¹ã§ã¯ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆãƒ“ãƒ«ãƒ‰ã¯ã‚ãã¾ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå˜ä½ã®ã¿ã€‚  
ãã‚Œã§ã‚‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¨ãƒ†ã‚¹ãƒˆã‚’åˆ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã™ã‚Œã°ã€ãƒ†ã‚¹ãƒˆã®ãŸã³ã«ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ã¯ãªããªã‚‹ã€‚

ã¾ãŸã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚³ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èª¤ã£ã¦importã™ã‚‹ã“ã¨ã‚‚ãªããªã‚‹ã€‚

## [Rest parameters with tuple types]

[Rest parameters with tuple types]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#rest-parameters-with-tuple-types

{{label('had_better')}} {{label('easy')}}

Rest parametersã«ã‚¿ãƒ—ãƒ«ãŒå¯¾å¿œã—ãŸã€‚

```typescript
function foo1(...args: [number, string, boolean]) {
  console.log(args)
}

foo1(10, "ten", true)
// -> [ 10, 'ten', true ]
```

## [Spread expressions with tuple types]

[Spread expressions with tuple types]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#spread-expressions-with-tuple-types

{{label('had_better')}} {{label('easy')}}

Spread operatorã®ã‚¿ãƒ—ãƒ«ç‰ˆã«å¯¾å¿œã—ãŸã€‚

```typescript
function foo(x: number, y: string, z: boolean) {
  console.log(x, y, z);
}

const args: [number, string, boolean] = [10, "ten", true];
foo(...args);
// -> 10 ten true
```

## [Generic rest parameters]

[Generic rest parameters]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#generic-rest-parameters

{{label('had_better')}} {{label('normal')}}

Rest parametersã«ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚  
`any[]`ã¯Tupleå‹ã«æ¨è«–/ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚Œã‚‹ã€‚

ãã‚Œã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªéƒ¨åˆ†é©å¿œã™ã‚‹é–¢æ•°bindã®å‹æ¨è«–ãŒã§ãã‚‹ã€‚

```typescript
declare function bind<T, U extends any[], V>(
  f: (x: T, ...args: U) => V,
  x: T
): (...args: U) => V;
```

å®Ÿè£…ã—ãŸã‚³ãƒ¼ãƒ‰ä¾‹ã¯ä»¥ä¸‹ã€‚

```typescript
function bind<T, U extends any[], V>(
  f: (x: T, ...args: U) => V, // é–¢æ•°fã®ç¬¬1å¼•æ•°ã‚’Tã€ç¬¬2å¼•æ•°ä»¥é™ã‚’U(ã‚¿ãƒ—ãƒ«) ã¨ã™ã‚‹
  x: T // é–¢æ•°fã®ç¬¬2å¼•æ•°ã¯ ä¸Šè¨˜fã®ç¬¬1å¼•æ•°ã¨åŒã˜å‹T
): (...args: U) => V {
  // æˆ»ã‚Šå€¤ã¯é–¢æ•°å‹. ãã®å¼•æ•°ã¯é–¢æ•°fã®ç¬¬2å¼•æ•°ä»¥é™ (ç¬¬1å¼•æ•°ã¯bindã•ã‚ŒãŸ)
  return (...args: U) => f(x, ...args);
}

function say(name: string, age: number, shouldAgeSecret: boolean): string {
  return `ç§ã®åå‰ã¯${name}ã§ã™ã€‚ æ­³ã¯${shouldAgeSecret ? "ç§˜å¯†" : age}ã§ã™ã€‚`;
}

const mimizouSay = bind(say, "ã¿ã¿ãã†"); // ç¬¬2å¼•æ•°ãŒstringã¨æ¨è«–ã•ã‚Œã‚‹
console.log(mimizouSay(333, false));
// -> ç§ã®åå‰ã¯ã¿ã¿ãã†ã§ã™ã€‚ æ­³ã¯333ã§ã™ã€‚

const mimizou33YearSay = bind(mimizouSay, 33); // ç¬¬2å¼•æ•°ãŒnumberã¨æ¨è«–ã•ã‚Œã‚‹
console.log(mimizou33YearSay(false));
// -> ç§ã®åå‰ã¯ã¿ã¿ãã†ã§ã™ã€‚ æ­³ã¯33ã§ã™ã€‚

const mimizou33YearSaySecret = bind(mimizou33YearSay, true); // ç¬¬2å¼•æ•°ãŒbooleanã¨æ¨è«–ã•ã‚Œã‚‹
console.log(mimizou33YearSaySecret());
// -> ç§ã®åå‰ã¯ã¿ã¿ãã†ã§ã™ã€‚ æ­³ã¯ç§˜å¯†ã§ã™ã€‚
```

## [Optional elements in tuple types]

[Optional elements in tuple types]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#optional-elements-in-tuple-types

{{label('had_better')}} {{label('easy')}}

ã‚¿ãƒ—ãƒ«ã§ã‚‚`?`ã§Optionalã‚’è¡¨ç¾ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

```typescript
let t: [number, string?, boolean?];

t = [10];
t = [10, undefined];
t = [10, "10"];
t = [10, "10", undefined];
t = [10, "10", true];
```

## [New unknown top type]

[New unknown top type]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#new-unknown-top-type

{{label('had_better')}} {{label('easy')}}

å®‰å…¨ãªanyå‹ã¨ç§°ã•ã‚Œã‚‹`unknown`å‹ãŒè¿½åŠ ã•ã‚ŒãŸã€‚  
**å‹ãŒåˆ†ã‹ã‚‰ãªã„ã‚‚ã®ã‚’anyã¨æ‰±ã†ã®ã¯å¤§å¤‰å±é™ºãªã®ã§ã€unknownã‚’ä½¿ãŠã†ã€‚**

* å…¨ã¦ã®å‹ã¯`unknown`å‹ã«ä»£å…¥ã§ãã‚‹
* `unknown`å‹ã¯`unknown`å‹ã¨anyå‹ä»¥å¤–ã«ã¯ä»£å…¥ã§ããªã„

`unknown`å‹ã¯ã„ã‹ãªã‚‹æ“ä½œã‚‚å—ã‘ã¤ã‘ãªã„ã€‚(é–¢æ•°å‘¼ã³å‡ºã—ã‚„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚¢ã‚¯ã‚»ã‚¹ãªã©)

```typescript
declare let strangers: unknown[];

console.log(strangers.length)
// -> unknownå‹ã®ã‚¤ãƒ¬ãƒ¢ãƒã§ã‚ã‚‹é…åˆ—ã¯ä½¿ãˆã‚‹

console.log(strangers[0].length)
// -> unknownå‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚ˆã†ã¨ã—ã¦ã‚¨ãƒ©ãƒ¼
```

Narrowingã§å‹ã‚’ç‹­ã‚ã‚‹ã¨å…·ä½“çš„ãªå‹ã¨ã—ã¦åˆ¤å®šã•ã‚Œã‚‹ã€‚

```typescript
declare let stranger: unknown;

if (typeof stranger === "string") {
    stranger.length;
    // -> strangerã¯stringã¨æ¨è«–ã•ã‚Œã‚‹ã®ã§OK
}
```

Union Typeã‚„Intersection Typeã®æŒ™å‹•ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚

* `unknown & T` ã¯ `T`
* `unknown | T` (Tã¯anyä»¥å¤–) ã¯ `unknown`
* `unknown | T` (Tã¯any) ã¯ `any`

## [Support for defaultProps in JSX]

[Support for defaultProps in JSX]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#support-for-defaultprops-in-jsx

{{label('had_better')}} {{label('easy')}}

JSXã§`defaultProps`ã«å¯¾å¿œã—ãŸã€‚

=== "v2.9"
    ```typescript
    import React from "./node_modules/@types/react";

    export interface Props {
      name: string;
    }

    export class Greet extends React.Component<Props> {
      render() {
        const { name } = this.props;
        return <div>Hello {name.toUpperCase()}!</div>;
      }
    }

    // nameãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„ã®ã§ã‚¨ãƒ©ãƒ¼
    let el = <Greet />;
    ```

=== "v3.0"
    ```typescript
    import React from "./node_modules/@types/react";

    export interface Props {
      name: string;
    }

    export class Greet extends React.Component<Props> {
      render() {
        const { name } = this.props;
        return <div>Hello {name.toUpperCase()}!</div>;
      }
      // defaultPropsã‚’è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸ
      static defaultProps = { name: "world" };
    }

    // â†‘ã§defaultPropsã‚’æŒ‡å®šã™ã‚‹ã¨Optionalã¨ã¿ãªã—ã¦ãã‚Œã‚‹
    let el = <Greet />;
    ```

## [`/// <reference lib="..." />` reference directives](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#-reference-lib--reference-directives)

{{label('had_better')}} {{label('easy')}}

`<reference lib="es..." />`ã§ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã®libã«å¯¾ã—ã¦æ˜ç¤ºçš„ã«å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

ä»¥ä¸‹ã¯`target`ã«`es5`ã‚’æŒ‡å®šã—ãŸã‚±ãƒ¼ã‚¹ã§ã€Promiseã¯ä½¿ãˆãªã„ã€‚  
ã¨ã“ã‚ãŒã€`<reference lib="..." />`ã§Promiseã‚’æŒ‡å®šã™ã‚‹ã¨ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

=== "referenceãªã—ã§PromiseãŒä½¿ãˆãªã„"
    `index.ts`
    ```typescript
    Promise.resolve("hoge");
    ```
    
    `tsconfig.json`
    ```json
    {
      "compilerOptions": {
        "target": "es5",
        "module": "commonjs",
        "strict": true,
        "moduleResolution": "node",
        "esModuleInterop": true
      }
    }
    ```

=== "referenceæŒ‡å®šã§PromiseãŒä½¿ãˆã‚‹"
    `index.ts`
    ```typescript
    /// <reference lib="es2015.Promise" />
    
    Promise.resolve("hoge");
    ```
    
    `tsconfig.json`
    ```json
    {
      "compilerOptions": {
        "target": "es5",
        "module": "commonjs",
        "strict": true,
        "moduleResolution": "node",
        "esModuleInterop": true
      }
    }
    ```
